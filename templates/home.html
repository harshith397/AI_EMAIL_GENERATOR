<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Email Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/design.css">
</head>
<body>
    <div class="parallax welcome-section">
        <h1 id="typing-text">Welcome to AI Email Generator</h1>
        <button class="explore-btn" onclick="scrollToForm()">Explore</button>
    </div>

    <div class="email-section" id="email-section">
        <div class="sidebar">
            <h2>How To Use</h2>
            <p>1. Fill in the recipient's details.</p>
            <p>2. Enter the subject of the email.</p>
            <p>3. Describe the purpose of the email.</p>
            <p>4. Choose the tone and closing of the email.</p>
            <p>5. If you don't enter the details correctly the Email Generaor can give some random content.</p>
        </div>

        <div class="form-container">
            <form id="email-form">
                <h2>ðŸ“§ AI Email Generator</h2>
                <input type="text" name="recipient_name" placeholder="Recipient's Name" required>
                <input type="text" name="recipient_designation" placeholder="Recipient's Designation/Role">
                <input type="text" name="email_subject" placeholder="Enter Email Subject" required>
                <textarea name="email_purpose" placeholder="Purpose of the Email" rows="4" required></textarea>
                <input type="text" name="call_to_action" placeholder="Prompts (CTA)">
                <input type="text" name="sender_name" placeholder="Sender's Name" required>
                <select name="email_tone">
                    <option value="Formal">Formal</option>
                    <option value="Semi-formal">Semi-formal</option>
                    <option value="Casual">Casual</option>
                </select>
                <select name="email_closing">
                    <option value="Best regards,">Best regards,</option>
                    <option value="Sincerely,">Sincerely,</option>
                    <option value="Thanks,">Thanks,</option>
                    <option value="Warm regards,">Warm regards,</option>
                </select>
                <button type="submit">Generate Email</button>
            </form>

            <!-- Text box for showing the generated email -->
            <div class="generated-email-container">
                <textarea id="generated-email" name="generated_email" placeholder="Generated Email will appear here..." rows="8" readonly></textarea>
                <button class="copy-btn" onclick="copyToClipboard()">
                    <img src="static/copy-icon-transparent.png" alt="Copy" />
                </button>
            </div>
        </div>
    </div>

    <script>
        function scrollToForm() {
            document.getElementById('email-section').scrollIntoView({ behavior: 'smooth' });
        }

        document.getElementById('email-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const formData = {
                recipient_name: document.querySelector('[name="recipient_name"]').value,
                designation: document.querySelector('[name="recipient_designation"]').value,
                subject: document.querySelector('[name="email_subject"]').value,
                purpose: document.querySelector('[name="email_purpose"]').value,
                tone: document.querySelector('[name="email_tone"]').value,
                key_content_points: "Relevant details included",
                cta: document.querySelector('[name="call_to_action"]').value,
                sender_name: document.querySelector('[name="sender_name"]').value,
                closing: document.querySelector('[name="email_closing"]').value
            };

            fetch('/generate_email', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('generated-email').value = data.generated_email;
                scrollToBottom(); // Scroll to the bottom after generating the email
            })
            .catch(error => console.error('Error:', error));
        });

        // Typing animation
        document.addEventListener('DOMContentLoaded', function() {
            const text = "Welcome to AI Email Generator";
            let index = 0;
            const typingText = document.getElementById('typing-text');
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            cursor.innerHTML = '|';
            typingText.appendChild(cursor);

            function type() {
                if (index < text.length) {
                    typingText.innerHTML = text.substring(0, index + 1) + '<span class="cursor">|</span>';
                    index++;
                    setTimeout(type, 100);
                } else {
                    cursor.style.display = 'none';
                }
            }

            type();
        });

        // Copy to clipboard function
        function copyToClipboard() {
            const generatedEmail = document.getElementById('generated-email');
            generatedEmail.select();
            document.execCommand('copy');
            alert('Copied to clipboard');
        }

        // Scroll to the bottom of the page
        function scrollToBottom() {
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>
